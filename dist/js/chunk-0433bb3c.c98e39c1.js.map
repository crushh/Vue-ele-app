{"version":3,"sources":["webpack:///./src/views/Home.vue?f339","webpack:///./src/views/Home.vue?7b01","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2b8c","webpack:///./src/views/Home.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Home_vue_vue_type_style_index_0_id_152abb16_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Home_vue_vue_type_style_index_0_id_152abb16_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","$event","$router","push","name","params","city","_v","_s","address","class","fixedview","showFilter","_m","attrs","id","auto","_l","img","index","key","src","alt","entry","i","item","image","filterData","searchFixed","showFilterView","update","ref","top-method","loadData","bottom-method","loadMore","bottom-all-loaded","allLoaded","auto-fill","bottomPullText","restaurant","staticRenderFns","Homevue_type_script_lang_js_","data","swipeImgs","entries","page","size","restaurants","computed","$store","getters","location","addressComponent","province","created","getData","methods","_this","$axios","then","res","_this2","buttomPullText","post","concat","$refs","loadmore","onTopLoaded","_this3","onBottomLoaded","length","forEach","isShow","condition","components","FilterView","IndexShop","views_Homevue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-0433bb3c.c98e39c1.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=152abb16&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=152abb16&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"address_map\",on:{\"click\":function($event){return _vm.$router.push({name: 'address',params: {city: _vm.city}})}}},[_c('i',{staticClass:\"fa fa-map-marker\"}),_c('span',[_vm._v(_vm._s(_vm.address))]),_c('i',{staticClass:\"fa fa-sort-desc\"})]),_c('div',{staticClass:\"search_wrap\",class:{'fixedview':_vm.showFilter},on:{\"click\":function($event){return _vm.$router.push('./search')}}},[_vm._m(0)])]),_c('div',{attrs:{\"id\":\"container\"}},[_c('mt-swipe',{staticClass:\"swiper\",attrs:{\"auto\":4000}},_vm._l((_vm.swipeImgs),function(img,index){return _c('mt-swipe-item',{key:index},[_c('img',{attrs:{\"src\":img,\"alt\":\"\"}})])}),1),_c('mt-swipe',{staticClass:\"entries\",attrs:{\"auto\":0}},_vm._l((_vm.entries),function(entry,i){return _c('mt-swipe-item',{key:i,staticClass:\"entry_wrap\"},_vm._l((entry),function(item,index){return _c('div',{key:index,staticClass:\"foodentry\"},[_c('div',{staticClass:\"img_wrap\"},[_c('img',{attrs:{\"src\":item.image,\"alt\":\"\"}})]),_c('span',[_vm._v(_vm._s(item.name))])])}),0)}),1)],1),_c('div',{staticClass:\"shoplist_title\"},[_vm._v(\"推荐商家\")]),_c('FilterView',{attrs:{\"filterData\":_vm.filterData},on:{\"searchFixed\":_vm.showFilterView,\"update\":_vm.update}}),_c('mt-loadmore',{ref:\"loadmore\",attrs:{\"top-method\":_vm.loadData,\"bottom-method\":_vm.loadMore,\"bottom-all-loaded\":_vm.allLoaded,\"auto-fill\":false,\"bottomPullText\":_vm.bottomPullText}},[_c('div',{staticClass:\"shoplist\"},_vm._l((_vm.restaurants),function(item,index){return _c('IndexShop',{key:index,attrs:{\"restaurant\":item.restaurant}})}),1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shop_search\"},[_c('i',{staticClass:\"fa fa-search\"}),_vm._v(\"\\n        搜索商家 商家名称\\n      \")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home\">\n\n    <div class=\"header\">\n<!-- 定位 -->\n      <div class=\"address_map\" @click=\"$router.push({name: 'address',params: {city: city}})\">\n        <i class=\"fa fa-map-marker\"></i>\n        <span>{{address}}</span>\n        <i class=\"fa fa-sort-desc\"></i>\n      </div>\n<!-- 搜索框 -->\n      <div class=\"search_wrap\" :class= \"{'fixedview':showFilter}\" @click=\"$router.push('./search')\">\n      <div class=\"shop_search\">\n        <i class=\"fa fa-search\"></i>\n        搜索商家 商家名称\n      </div>\n      </div>\n    </div>\n\n<div id=\"container\">\n <!-- 轮播 -->\n  <mt-swipe :auto=\"4000\" class=\"swiper\">\n  <mt-swipe-item v-for=\"(img,index) in swipeImgs\" :key=\"index\">\n    <img :src=\"img\" alt=\"\">\n  </mt-swipe-item>\n  </mt-swipe>\n  <!-- 分类 -->\n    <mt-swipe :auto=\"0\" class=\"entries\">\n  <mt-swipe-item v-for=\"(entry,i) in entries\" :key=\"i\" class=\"entry_wrap\">\n    <div class=\"foodentry\" v-for=\"(item,index) in entry\" :key=\"index\">\n     <div class=\"img_wrap\">\n      <img :src=\"item.image\" alt>\n     </div>\n     <span>{{item.name}}</span>\n    </div>\n  </mt-swipe-item>\n  </mt-swipe>\n  </div>\n\n  \n  <!-- 推荐商家 -->\n  <div class=\"shoplist_title\">推荐商家</div>\n  <!-- 导航 -->\n  <FilterView :filterData=\"filterData\" @searchFixed=\"showFilterView\"  @update=\"update\"/>\n \n <!-- 商家信息 -->\n <mt-loadmore \n :top-method=\"loadData\" \n :bottom-method=\"loadMore\" \n :bottom-all-loaded=\"allLoaded\" \n :auto-fill=\"false\"\n :bottomPullText=\"bottomPullText\"\n  ref=\"loadmore\">\n  <div class=\"shoplist\">\n   <IndexShop v-for=\"(item,index) in restaurants\" \n   :key=\"index\"\n   :restaurant=\"item.restaurant\"\n    />\n </div>\n</mt-loadmore>\n \n\n\n\n  </div>\n</template>\n\n<script>\n    import { Swipe, SwipeItem } from 'mint-ui';\n    import FilterView from '../components/FilterView'\n    import IndexShop from '../components/IndexShop'\n    import { Loadmore } from 'mint-ui';\nexport default {\n  name: \"home\",\n  data(){\n      return{\n        swipeImgs:[],\n        entries:[],\n        filterData:null,\n        showFilter:false,\n        page:1,\n        size:5,\n        restaurants:[],//存放所有商家信息\n        allLoaded:false,\n        bottomPullText:\"上啦加载更多\",\n        data:null\n\n      }\n\n    },\n  computed: {\n    address() {\n      return this.$store.getters.address;\n    },\n    city() {\n      return (\n        this.$store.getters.location.addressComponent.city ||\n        this.$store.getters.location.addressComponent.province\n      );\n    }\n  },\n    created(){\n      this.getData();\n    },\n    methods:{\n      getData(){\n        this.$axios(\"/api/profile/shopping\").then(\n          res=>{\n            // console.log(res.data);\n           this.swipeImgs=res.data.swipeImgs;\n           this.entries=res.data.entries;\n\n          });\n        this.$axios(\"/api/profile/filter\").then(res=>{\n          // console.log(res.data);\n          this.filterData=res.data;\n\n        });\n         this.loadData();\n  \n        },\n         loadData(){\n          this.page=1;\n          this.allLoaded=false;\n          this.buttomPullText=\"上拉加载更多\";\n            //拉取商家信息\n          this.$axios.post(`/api/profile/restaurants/${this.page}/${this.size}`,this.data).then(res=>{\n          //console.log(res.data);\n          // 加载更多数据\n          this.$refs.loadmore.onTopLoaded();\n          this.restaurants=res.data;\n        });\n        },\n        loadMore(){\n          if(!this.allLoaded){\n            this.page++;\n              //拉取商家信息\n            this.$axios.post(`/api/profile/restaurants/${this.page}/${this.size}`).then(res=>{\n              //加载完后重新渲染\n               this.$refs.loadmore.onBottomLoaded();\n               if(res.data.length>0){\n                res.data.forEach(item=>{\n                  this.restaurants.push(item);\n\n                });\n                if(res.data<this.size){\n                  this.allLoaded=true;\n                  this.bottomPullText=\"没有更多了哦！\";\n                }\n               }else{\n                //数据为空\n                this.allLoaded=true;\n                this.bottomPullText=\"没有更多了哦！\";\n               }\n             });\n          }\n\n        },\n        showFilterView(isShow){\n          this.showFilter=isShow;\n        },\n        update(condition){\n          // console.log(condition);\n          this.data=condition;\n          this.loadData();\n\n        }\n      },\n      components:{\n        FilterView,\n        IndexShop\n      }\n    };\n\n</script>\n\n<style scoped>\n.home {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n\n}\n\n\n.header .address_map {\n\n  color: #fff;\n  font-weight: bold;\n  background-color: #009eef;\n  padding-bottom: 10px;\n  border: 2.25px solid #009eef;\n}\n.address_map i {\n  margin: 0 3px;\n  font-size: 18px;\n}\n.address_map span {\n  display: inline-block;\n  width: 80%;\n  padding-top: 10px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n\n.header\n.search_wrap {\n  background-color: #009eef;\n  padding: 10px 16px;\n}\n.search_wrap .shop_search {\n  /* margin-top: 10px; */\n  background-color: #fff;\n  padding: 10px 0;\n  border-radius: 4px;\n  text-align: center;\n  color: #aaa;\n}\n\n.search_wrap {\n  position: sticky;\n  top: 0px;\n  z-index: 999;\n  box-sizing: border-box;\n}\n\n\n\n.swiper {\n  height: 100px;\n}\n.swiper img {\n  width: 100%;\n  height: 100px;\n}\n\n.entries {\n  background: #fff;\n  height: 47.2vw;\n  text-align: center;\n  overflow: hidden;\n}\n.foodentry {\n  width: 20%;\n  float: left;\n  position: relative;\n  margin-top: 2.933333vw;\n}\n.foodentry .img_wrap {\n  position: relative;\n  display: inline-block;\n  width: 12vw;\n  height: 12vw;\n}\n.img_wrap img {\n  width: 100%;\n  height: 100%;\n}\n.foodentry span {\n  display: block;\n  color: #666;\n  font-size: 0.32rem;\n}\n/* 推荐商家 */\n.shoplist_title {\n  display: flex;\n  align-items: flex;\n  justify-content: center;\n  height: 9.6vw;\n  line-height: 9.6vw;\n  font-size: 16px;\n  color: #333;\n  background: #fff;\n}\n.shoplist_title:after,\n.shoplist_title:before {\n  display: block;\n  content: \"一\";\n  width: 5.333333vw;\n  height: 0.266667vw;\n  color: #999;\n}\n.shoplist_title:before {\n  margin-right: 3.466667vw;\n}\n.shoplist_title:after {\n  margin-left: 3.466667vw;\n}\n\n.fixedview {\n  width: 100%;\n  position: fixed;\n  top: 0px;\n  z-index: 999;\n}\n.mint-loadmore{\n  height: calc(100%-95.5px);\n  overflow: auto;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=152abb16&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=152abb16&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"152abb16\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}